---
import { Image } from 'astro:assets';
import QRYape from '@assets/images/donation.webp';

const datosBancarios = {
    titulo: "Transferencia Bancaria",
    cuentas: [
        {
            banco: "Banco de Crédito del Perú",
            tipo: "Cuenta Corriente",
            moneda: "Soles",
            numero: "475-2541268-0-52",
            cci: "002-475-002541268052-36",
            titular: "Seminario Menor Santo Toribio de Mogrovejo",
            ruc: "20157757437"
        },
    ]
};

const datosYape = {
    titulo: "Yape",
    nombre: "Seminario Menor",
    numero: "999 888 777",
    qrAlt: "Código QR para pago con Yape"
};
---

<section class="relative py-24 bg-gray-950 overflow-hidden" aria-labelledby="payment-title">
    <!-- Elementos decorativos -->
    <div class="absolute inset-0">
        <div class="absolute inset-0" 
             style="background-image: radial-gradient(circle at 1px 1px, #0052cc 1px, transparent 0);
                    background-size: 32px 32px;
                    opacity: 0.1;">
        </div>
        <div class="absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-[#0052cc]/20 to-transparent"></div>
        <div class="absolute bottom-0 right-0 w-96 h-96 bg-[#0052cc]/30 rounded-full filter blur-3xl opacity-20"></div>
    </div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Encabezado -->
        <header class="max-w-2xl mx-auto text-center mb-16">
            <div class="inline-flex items-center justify-center space-x-3 mb-6">
                <div class="h-[1px] w-12 bg-gradient-to-r from-transparent via-[#0052cc] to-transparent"></div>
                <span class="px-4 py-2 rounded-full bg-[#0052cc]/20 text-sm font-medium text-[#66b3ff] tracking-wider border border-[#0052cc]/30">
                    Métodos de Pago
                </span>
                <div class="h-[1px] w-12 bg-gradient-to-r from-transparent via-[#0052cc] to-transparent"></div>
            </div>
            <h2 id="payment-title" class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-6">
                Realiza tu
                <span class="relative whitespace-nowrap text-[#66b3ff]">
                    <svg aria-hidden="true" viewBox="0 0 418 42" class="absolute left-0 top-full h-[0.4em] w-full fill-[#66b3ff]/30" preserveAspectRatio="none">
                        <path d="M203.371.916c-26.013-2.078-76.686 1.963-124.73 9.946L67.3 12.749C35.421 18.062 18.2 21.766 6.004 25.934 1.244 27.561.828 27.778.874 28.61c.07 1.214.828 1.121 9.595-1.176 9.072-2.377 17.15-3.92 39.246-7.496C123.565 7.986 157.869 4.492 195.942 5.046c7.461.108 19.25 1.696 19.17 2.582-.107 1.183-7.874 4.31-25.75 10.366-21.992 7.45-35.43 12.534-36.701 13.884-2.173 2.308-.202 4.407 4.442 4.734 2.654.187 3.263.157 15.593-.78 35.401-2.686 57.944-3.488 88.365-3.143 46.327.526 75.721 2.23 130.788 7.584 19.787 1.924 20.814 1.98 24.557 1.332l.066-.011c1.201-.203 1.53-1.825.399-2.335-2.911-1.31-4.893-1.604-22.048-3.261-57.509-5.556-87.871-7.36-132.059-7.842-23.239-.254-33.617-.116-50.627.674-11.629.54-42.371 2.494-46.696 2.967-2.359.259 8.133-3.625 26.504-9.81 23.239-7.825 27.934-10.149 28.304-14.005.417-4.348-3.529-6-16.878-7.066Z" />
                    </svg>
                    <span class="relative">Donación</span>
                </span>
            </h2>
            <p class="text-lg text-gray-300 max-w-prose mx-auto">
                Elige el método de pago que prefieras para realizar tu aporte
            </p>
        </header>

        <!-- Grid de Métodos de Pago -->
        <div class="grid lg:grid-cols-2 gap-8">
            <!-- Transferencia Bancaria -->
            <div class="group relative">
                <div class="absolute -inset-2 bg-gradient-to-r from-[#0052cc]/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 blur-xl rounded-2xl"></div>
                <div class="relative p-8 bg-gray-900/50 backdrop-blur-sm rounded-2xl border border-white/10">
                    <header class="flex items-center gap-4 mb-6">
                        <span class="inline-flex items-center justify-center w-12 h-12 rounded-xl bg-[#0052cc]/20 text-[#66b3ff]">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                            </svg>
                        </span>
                        <h3 class="text-xl font-semibold text-white">{datosBancarios.titulo}</h3>
                    </header>

                    {datosBancarios.cuentas.map(cuenta => (
                        <div class="space-y-4">
                            <!-- Datos de Cuenta -->
                            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center">
                                        <span class="text-[#66b3ff] font-medium">{cuenta.banco}</span>
                                        <span class="text-sm text-gray-400">{cuenta.tipo} - {cuenta.moneda}</span>
                                    </div>
                                    <div class="relative group/copy">
                                        <div class="flex items-center gap-2">
                                            <span class="text-white font-mono text-lg">{cuenta.numero}</span>
                                            <button 
                                                class="p-1 text-gray-400 hover:text-[#66b3ff] transition-colors"
                                                onclick="navigator.clipboard.writeText('{cuenta.numero}')"
                                                aria-label="Copiar número de cuenta"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Código CCI -->
                            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
                                <div class="space-y-2">
                                    <span class="text-[#66b3ff] font-medium">Código CCI</span>
                                    <div class="relative group/copy">
                                        <div class="flex items-center gap-2">
                                            <span class="text-white font-mono text-lg">{cuenta.cci}</span>
                                            <button 
                                                class="p-1 text-gray-400 hover:text-[#66b3ff] transition-colors"
                                                onclick="navigator.clipboard.writeText('{cuenta.cci}')"
                                                aria-label="Copiar CCI"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Datos del Titular -->
                            <div class="space-y-2 text-gray-300">
                                <p><span class="text-[#66b3ff] font-medium">Titular:</span> {cuenta.titular}</p>
                                <p><span class="text-[#66b3ff] font-medium">RUC:</span> {cuenta.ruc}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>

            <!-- Yape -->
            <div class="group relative">
                <div class="absolute -inset-2 bg-gradient-to-r from-[#0052cc]/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 blur-xl rounded-2xl"></div>
                <div class="relative p-8 bg-gray-900/50 backdrop-blur-sm rounded-2xl border border-white/10">
                    <header class="flex items-center gap-4 mb-6">
                        <span class="inline-flex items-center justify-center w-12 h-12 rounded-xl bg-[#0052cc]/20 text-[#66b3ff]">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                            </svg>
                        </span>
                        <h3 class="text-xl font-semibold text-white">{datosYape.titulo}</h3>
                    </header>

                    <div class="flex flex-col items-center gap-6">
                        <!-- QR -->
                        <div class="relative p-4 bg-white rounded-2xl">
                            <Image
                                src={QRYape}
                                alt={datosYape.qrAlt}
                                class="w-48 h-48"
                                width={192}
                                height={192}
                            />
                        </div>

                        <!-- Datos de Yape -->
                        <div class="text-center space-y-2">
                            <p class="text-[#66b3ff] font-medium">{datosYape.nombre}</p>
                            <div class="relative group/copy">
                                <div class="flex items-center justify-center gap-2">
                                    <span class="text-white font-mono text-lg">{datosYape.numero}</span>
                                    <button 
                                        class="p-1 text-gray-400 hover:text-[#66b3ff] transition-colors"
                                        onclick="navigator.clipboard.writeText('{datosYape.numero}')"
                                        aria-label="Copiar número de Yape"
                                    >
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Nota Informativa -->
        <div class="mt-12 text-center">
            <p class="text-gray-400 text-sm">
                Una vez realizada tu donación, no olvides guardar el comprobante de la operación.
                <br />
                Si deseas un certificado de donación, por favor contáctanos.
            </p>
        </div>
    </div>
</section>

<script>
const showCopyNotification = (button: HTMLButtonElement, message: string = "¡Copiado!") => {
    const notification = document.createElement('div');
    notification.className = 'fixed bottom-4 right-4 bg-[#0052cc] text-white px-4 py-2 rounded-lg shadow-lg transform translate-y-full opacity-0 transition-all duration-300';
    notification.textContent = message;
    document.body.appendChild(notification);

    // Animar entrada
    requestAnimationFrame(() => {
        notification.classList.remove('translate-y-full', 'opacity-0');
    });

    // Animar salida después de 2 segundos
    setTimeout(() => {
        notification.classList.add('translate-y-full', 'opacity-0');
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 2000);
};

// Agregar feedback visual al copiar
document.querySelectorAll('button[onclick^="navigator.clipboard"]').forEach(button => {
    button.addEventListener('click', (e) => {
        e.preventDefault();
        const textToCopy = button.getAttribute('onclick')?.match(/'([^']+)'/)?.[1] || '';
        
        navigator.clipboard.writeText(textToCopy).then(() => {
            showCopyNotification(button as HTMLButtonElement);
            
            // Efecto visual en el botón
            button.classList.add('text-[#66b3ff]');
            setTimeout(() => {
                button.classList.remove('text-[#66b3ff]');
            }, 200);
        }).catch(err => {
            console.error('Error al copiar:', err);
        });
    });
});
</script>

<style>
.transition-all {
    transition-property: all;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 300ms;
}

.transition-opacity {
    transition-property: opacity;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 300ms;
}

.transition-colors {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 300ms;
}

/* Hover Effects */
@media (hover: hover) and (pointer: fine) {
    .hover\:scale-105:hover {
        transform: scale(1.05);
    }

    .group:hover .group-hover\:opacity-100 {
        opacity: 1;
    }
}

/* Optimizaciones móviles */
@media (max-width: 640px) {
    .p-8 {
        padding: 1.5rem;
    }
}

/* Soporte para preferencias de movimiento reducido */
@media (prefers-reduced-motion: reduce) {
    .transition-all,
    .transition-opacity,
    .transition-colors,
    .hover\:scale-105:hover,
    .group-hover\:opacity-100 {
        transition: none !important;
        transform: none !important;
    }

    [class*='animate-'] {
        animation: none !important;
    }
}

/* Mejoras de accesibilidad */
button:focus-visible,
a:focus-visible {
    outline: 2px solid #0052cc;
    outline-offset: 2px;
}

/* Optimizaciones de rendimiento */
.backdrop-blur-sm {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.transform {
    transform: translateZ(0);
    will-change: transform;
}
</style>