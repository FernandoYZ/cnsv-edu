---
import { Image } from 'astro:assets';
import admissionJPG from '@assets/images/donation.jpg';
import PrimaryButton from '@components/buttons/PrimaryButton.astro';
import SecundaryButton from '@components/buttons/SecundaryButton.astro';
import data from '@data';

// Constantes movidas arriba para mejor rendimiento
const AnioActual = new Date().getFullYear();
const { importancia, admission } = data;
---

<section class="relative py-24 overflow-hidden" aria-labelledby="admission-title">
    <!-- Fondo con gradient y patrones -->
    <aside class="absolute inset-0" aria-hidden="true">
        <div class="absolute inset-0 bg-gradient-to-b from-gray-50 via-white to-gray-50/10"></div>
        
        <!-- Círculos decorativos agrupados -->
        <div class="absolute top-0 right-0 -mt-16 -mr-16">
            <div class="w-64 h-64 rounded-full bg-[#800020]/5 blur-3xl"></div>
        </div>
        <div class="absolute bottom-0 left-0 -mb-16 -ml-16">
            <div class="w-64 h-64 rounded-full bg-[#800020]/5 blur-3xl"></div>
        </div>
        <div class="absolute bottom-0 right-0 -mt-16 -mr-16">
            <div class="absolute w-[500px] h-[500px] -top-32 -right-16 rounded-full bg-[#800020]/10 blur-3xl"></div>
        </div>
    </aside>

    <div class="relative max-w-7xl mx-auto px-6 lg:px-8">
        <main class="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
            <!-- Columna de Contenido -->
            <section class="relative">
                <div class="absolute -left-4 top-0 h-full w-1" aria-hidden="true">
                    <div class="sticky top-0 w-full h-24 bg-gradient-to-b from-[#800020] via-[#800020]/50 to-transparent rounded-full"></div>
                </div>

                <div class="space-y-8">
                    <header class="space-y-6">
                        <!-- Badge de Admisiones -->
                        <div class="inline-flex items-center gap-3">
                            <span class="relative flex h-3 w-3" aria-hidden="true">
                                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-[#800020] opacity-75"></span>
                                <span class="relative inline-flex rounded-full h-3 w-3 bg-[#800020]"></span>
                            </span>
                            <span class="px-4 py-2 rounded-full bg-[#800020]/5 text-sm font-medium text-[#800020] tracking-wider">
                                {admission.label} {AnioActual + 1}
                            </span>
                        </div>

                        <!-- Título Principal -->
                        <h1 id="admission-title" class="text-4xl lg:text-5xl font-bold text-gray-900 leading-tight">
                            {admission.titulo}
                            <span class="relative whitespace-nowrap text-[#800020]">
                                <svg aria-hidden="true" viewBox="0 0 418 42" class="absolute left-0 top-full h-[0.4em] w-full fill-[#800020]/20" preserveAspectRatio="none">
                                    <path d=`${admission.icon}`></path>
                                </svg>
                                {admission.span}
                            </span>
                        </h1>

                        <p class="text-lg text-gray-600 leading-relaxed max-w-2xl">
                            {admission.descripcion}
                        </p>
                    </header>

                    <!-- Características -->
                    <ul class="grid sm:grid-cols-2 gap-6" role="list">
                        {[...admission.features].map(feature => (
                            <li class="group relative">
                                <div class="absolute -inset-1 rounded-lg bg-gradient-to-r from-[#800020]/10 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 blur-lg"></div>
                                <article class="relative p-5 bg-white rounded-lg shadow-sm border border-gray-100">
                                    <div class="flex gap-4">
                                        <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-[#800020]/10 text-[#800020]">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5" aria-hidden="true">
                                                <path stroke-linecap="round" stroke-linejoin="round" d={feature.icon === 'check' ? "M4.5 12.75l6 6 9-13.5" : "M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"} />
                                            </svg>
                                        </span>
                                        <div>
                                            <h2 class="font-semibold text-gray-900">{feature.title}</h2>
                                            <p class="text-sm text-gray-500 mt-1">{feature.description}</p>
                                        </div>
                                    </div>
                                </article>
                            </li>
                        ))}
                    </ul>

                    <!-- Botones CTA -->
                    <nav class="flex flex-col sm:flex-row gap-4 pt-6">
                        <PrimaryButton href="admision" nombre="Iniciar Proceso" label="proceso" />
                        <SecundaryButton href="admision" nombre="Ver Requisitos" label="requisitos" />
                    </nav>
                </div>
            </section>

            <!-- Columna de Imagen -->
            <aside class="relative lg:mt-0">
                <div class="relative">
                    <!-- Elementos decorativos -->
                    <div class="absolute -inset-4" aria-hidden="true">
                        <div class="w-full h-full mx-auto rotate-2 rounded-3xl bg-gradient-to-r from-red-700/95 to-red-700/80 opacity-50"></div>
                    </div>
                    <div class="absolute -inset-4" aria-hidden="true">
                        <div class="w-full h-full mx-auto rotate-6 rounded-3xl bg-gradient-to-r from-red-700/95 to-red-700/80 opacity-25"></div>
                    </div>

                    <!-- Contenedor de imagen principal -->
                    <figure class="relative rounded-2xl overflow-hidden bg-white shadow-2xl">
                        <Image
                            src={admissionJPG}
                            alt="Estudiantes en el campus del Seminario"
                            class="w-full h-[500px] object-cover transform transition-transform duration-700 hover:scale-105"
                            loading="lazy"
                            decoding="async"
                            quality={90}
                            format="avif"
                            widths={[400, 800, 1200]}
                            sizes="(max-width: 640px) 400px, (max-width: 1024px) 800px, 1200px"
                        />

                        <!-- Overlay con información -->
                        <figcaption class="absolute bottom-6 left-6 right-6">
                            <div class="p-6 backdrop-blur-md bg-white/90 rounded-xl shadow-lg border border-white/40 transform translate-y-0 hover:-translate-y-1 transition-transform duration-300">
                                <div class="flex items-center gap-4">
                                    <span class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-[#800020] text-white font-bold text-lg">
                                        {AnioActual - importancia.aniversario.anio}
                                    </span>
                                    <div>
                                        <h3 class="text-gray-900 font-semibold">{admission.informacion.titulo}</h3>
                                        <p class="text-gray-600 text-sm">{admission.informacion.descripcion } {importancia.aniversario.anio}</p>
                                    </div>
                                </div>
                            </div>
                        </figcaption>
                    </figure>
                </div>
            </aside>
        </main>
    </div>
</section>

<style>
    @media (prefers-reduced-motion: reduce) {
        :root {
            --duration-300: 0ms;
            --duration-700: 0ms;
        }

        .animate-ping,
        [class*='transition-'],
        [class*='duration-'],
        [class*='hover\\:'],
        [class*='group-hover\\:'] {
            animation: none !important;
            transition: none !important;
            transform: none !important;
        }
    }
</style>