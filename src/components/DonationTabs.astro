---
import { Image } from 'astro:assets';
import PrimaryButton from './buttons/PrimaryButton.astro';

const proyectos = [
    {
        titulo: "Programa de Becas",
        descripcion: "Brindamos oportunidades educativas a estudiantes talentosos de bajos recursos, cubriendo matrícula, materiales y uniformes.",
        categoria: "Becas",
        imagen: "/path/to/becas.jpg",
        imagenAlt: "Estudiantes beneficiados por el programa de becas",
        stats: {
            numero: "50+",
            texto: "Estudiantes becados anualmente"
        },
        icon: "M12 14l9-5-9-5-9 5 9 5z M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z",
        meta: "75,000",
        recaudado: "45,000"
    },
    {
        titulo: "Renovación de Instalaciones",
        descripcion: "Modernizamos nuestras aulas y espacios deportivos para brindar la mejor experiencia educativa posible.",
        categoria: "Infraestructura",
        imagen: "/path/to/instalaciones.jpg",
        imagenAlt: "Renovación de instalaciones deportivas",
        stats: {
            numero: "8",
            texto: "Espacios renovados este año"
        },
        icon: "M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",
        meta: "120,000",
        recaudado: "85,000"
    },
    {
        titulo: "Pastoral y Formación Espiritual",
        descripcion: "Fortalecemos la formación espiritual a través de retiros, misiones y actividades pastorales.",
        categoria: "Pastoral",
        imagen: "/path/to/pastoral.jpg",
        imagenAlt: "Actividades pastorales con estudiantes",
        stats: {
            numero: "15+",
            texto: "Programas espirituales activos"
        },
        icon: "M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064",
        meta: "45,000",
        recaudado: "28,000"
    },
    {
        titulo: "Tecnología Educativa",
        descripcion: "Implementamos herramientas tecnológicas modernas para enriquecer el proceso de aprendizaje.",
        categoria: "Tecnología",
        imagen: "/path/to/tecnologia.jpg",
        imagenAlt: "Estudiantes utilizando tecnología educativa",
        stats: {
            numero: "12",
            texto: "Aulas con tecnología de punta"
        },
        icon: "M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",
        meta: "90,000",
        recaudado: "62,000"
    }
];
---

<section class="relative py-24 bg-gradient-to-b from-white via-gray-50 to-white overflow-hidden" aria-labelledby="proyectos-title">
    <!-- Elementos decorativos -->
    <div class="absolute inset-0">
        <!-- Patrón de puntos -->
        <div class="absolute inset-0" 
             style="background-image: radial-gradient(#800020 0.5px, transparent 0.5px);
                    background-size: 24px 24px;
                    opacity: 0.05;">
        </div>
        
        <!-- Formas decorativas -->
        <div class="absolute top-0 right-0 w-1/3 h-1/3 bg-gradient-to-br from-[#800020]/10 to-transparent blur-3xl"></div>
        <div class="absolute bottom-0 left-0 w-1/4 h-1/4 bg-gradient-to-tr from-[#800020]/10 to-transparent blur-2xl"></div>
    </div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Encabezado -->
        <header class="max-w-2xl mx-auto text-center mb-20">
            <div class="inline-flex items-center justify-center space-x-3 mb-6">
                <div class="h-[1px] w-12 bg-gradient-to-r from-transparent via-[#800020] to-transparent"></div>
                <span class="px-4 py-2 rounded-full bg-[#800020]/5 text-sm font-medium text-[#800020] tracking-wider">
                    Proyectos Destacados
                </span>
                <div class="h-[1px] w-12 bg-gradient-to-r from-transparent via-[#800020] to-transparent"></div>
            </div>
            <h2 id="proyectos-title" class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                Iniciativas que
                <span class="relative whitespace-nowrap text-[#800020]">
                    <svg aria-hidden="true" viewBox="0 0 418 42" class="absolute left-0 top-full h-[0.4em] w-full fill-[#800020]/20" preserveAspectRatio="none">
                        <path d="M203.371.916c-26.013-2.078-76.686 1.963-124.73 9.946L67.3 12.749C35.421 18.062 18.2 21.766 6.004 25.934 1.244 27.561.828 27.778.874 28.61c.07 1.214.828 1.121 9.595-1.176 9.072-2.377 17.15-3.92 39.246-7.496C123.565 7.986 157.869 4.492 195.942 5.046c7.461.108 19.25 1.696 19.17 2.582-.107 1.183-7.874 4.31-25.75 10.366-21.992 7.45-35.43 12.534-36.701 13.884-2.173 2.308-.202 4.407 4.442 4.734 2.654.187 3.263.157 15.593-.78 35.401-2.686 57.944-3.488 88.365-3.143 46.327.526 75.721 2.23 130.788 7.584 19.787 1.924 20.814 1.98 24.557 1.332l.066-.011c1.201-.203 1.53-1.825.399-2.335-2.911-1.31-4.893-1.604-22.048-3.261-57.509-5.556-87.871-7.36-132.059-7.842-23.239-.254-33.617-.116-50.627.674-11.629.54-42.371 2.494-46.696 2.967-2.359.259 8.133-3.625 26.504-9.81 23.239-7.825 27.934-10.149 28.304-14.005.417-4.348-3.529-6-16.878-7.066Z" />
                    </svg>
                    <span class="relative">Transforman</span>
                </span>
            </h2>
            <p class="text-lg text-gray-600 max-w-prose mx-auto">
                Descubre cómo tu apoyo impacta directamente en la formación integral de nuestros estudiantes.
            </p>
        </header>

        <!-- Grid de Proyectos -->
        <div class="grid gap-8 md:grid-cols-2">
            {proyectos.map((proyecto, index) => (
                <article class="group relative">
                    <!-- Efecto de hover -->
                    <div class="absolute -inset-2 bg-gradient-to-r from-[#800020]/10 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 blur-xl rounded-2xl"></div>
                    
                    <!-- Tarjeta principal -->
                    <div class="relative bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100">
                        <!-- Imagen del proyecto -->
                        <div class="relative h-64">
                            <Image
                                src={proyecto.imagen}
                                alt={proyecto.imagenAlt}
                                class="w-full h-full object-cover transform transition-transform duration-500 group-hover:scale-105"
                                width={600}
                                height={256}
                            />
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                            
                            <!-- Categoría flotante -->
                            <div class="absolute top-4 right-4">
                                <span class="inline-flex items-center px-3 py-1.5 rounded-full bg-white/90 border border-white/20 backdrop-blur-sm">
                                    <svg 
                                        xmlns="http://www.w3.org/2000/svg" 
                                        class="w-4 h-4 text-[#800020] mr-1.5" 
                                        fill="none" 
                                        viewBox="0 0 24 24" 
                                        stroke="currentColor"
                                    >
                                        <path 
                                            stroke-linecap="round" 
                                            stroke-linejoin="round" 
                                            stroke-width="1.5" 
                                            d={proyecto.icon} 
                                        />
                                    </svg>
                                    <span class="text-xs font-medium text-gray-900">{proyecto.categoria}</span>
                                </span>
                            </div>

                            <!-- Estadística flotante -->
                            <div class="absolute bottom-4 left-4">
                                <div class="flex items-center gap-2 text-white">
                                    <span class="text-2xl font-bold">{proyecto.stats.numero}</span>
                                    <span class="text-sm opacity-90">{proyecto.stats.texto}</span>
                                </div>
                            </div>
                        </div>

                        <!-- Contenido -->
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-gray-900 mb-2">{proyecto.titulo}</h3>
                            <p class="text-gray-600 mb-6">{proyecto.descripcion}</p>

                            <!-- Barra de progreso -->
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="font-medium text-gray-900">Recaudado: ${proyecto.recaudado}</span>
                                    <span class="text-gray-500">Meta: ${proyecto.meta}</span>
                                </div>
                                <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
                                    <div 
                                        class="h-full bg-[#800020] rounded-full transition-all duration-500"
                                        style={`width: ${(parseInt(proyecto.recaudado.replace(/,/g, '')) / parseInt(proyecto.meta.replace(/,/g, '')) * 100)}%`}
                                    ></div>
                                </div>
                            </div>

                            <!-- CTA -->
                            <div class="mt-6">
                                <a 
                                    href={`/donacion/${proyecto.categoria.toLowerCase()}`}
                                    class="inline-flex items-center justify-center w-full px-4 py-2.5 text-sm font-medium text-[#800020] bg-[#800020]/5 rounded-lg hover:bg-[#800020]/10 transition-colors duration-300"
                                >
                                    Apoyar este proyecto
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </article>
            ))}
        </div>

        <!-- CTA Global -->
        <div class="text-center mt-16">
            <PrimaryButton href="donacion/todos" nombre="Ver Todos los Proyectos" label="proyectos" />
        </div>
    </div>
</section>